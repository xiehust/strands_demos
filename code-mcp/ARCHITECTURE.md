# æ¶æ„è®¾è®¡: ä»£ç æ‰§è¡Œ MCP Server

## ä¸€ã€æ ¸å¿ƒè®¾è®¡ç†å¿µ

æ ¹æ® Anthropic æ–‡ç« çš„æ€æƒ³,æœ¬å®ç°é‡‡ç”¨äº†**ä»£ç æ‰§è¡Œæ¨¡å¼**è€Œéä¼ ç»Ÿçš„ç›´æ¥å·¥å…·è°ƒç”¨æ¨¡å¼ã€‚

### ä¼ ç»Ÿ MCP æ¨¡å¼çš„é—®é¢˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é—®é¢˜ 1: å·¥å…·å®šä¹‰è¿‡è½½ä¸Šä¸‹æ–‡çª—å£                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  æ‰€æœ‰å·¥å…·å®šä¹‰éƒ½é¢„å…ˆåŠ è½½:                           â”‚
â”‚                                                 â”‚
â”‚  tools = [                                      â”‚
â”‚    {                                            â”‚
â”‚      name: "read_file",                         â”‚
â”‚      description: "Read a file...",             â”‚
â”‚      parameters: {...}  # è¯¦ç»† schema           â”‚
â”‚    },                                           â”‚
â”‚    {                                            â”‚
â”‚      name: "write_file",                        â”‚
â”‚      description: "Write a file...",            â”‚
â”‚      parameters: {...}                          â”‚
â”‚    },                                           â”‚
â”‚    ... (100+ more tools)                        â”‚
â”‚  ]                                              â”‚
â”‚                                                 â”‚
â”‚  é—®é¢˜: å³ä½¿åªç”¨ 1 ä¸ªå·¥å…·,ä¹ŸåŠ è½½äº† 100+ ä¸ªå®šä¹‰       â”‚
â”‚  ç»“æœ: æµªè´¹ 10,000+ tokens                       â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é—®é¢˜ 2: ä¸­é—´ç»“æœæ¶ˆè€—é¢å¤– tokens                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  1. Agent: "è¯»å–æ–‡ä»¶ data.json"                  â”‚
â”‚     â†’ Tool: read_file("data.json")              â”‚
â”‚     â†’ Result: [50,000 tokens of data]           â”‚
â”‚     â†’ è¿›å…¥ä¸Šä¸‹æ–‡: âœ“                               â”‚
â”‚                                                 â”‚
â”‚  2. Agent: "è¿‡æ»¤ status=active çš„æ•°æ®"            â”‚
â”‚     â†’ Tool: filter(data, status="active")       â”‚
â”‚     â†’ Result: [25,000 tokens of filtered data]  â”‚
â”‚     â†’ è¿›å…¥ä¸Šä¸‹æ–‡: âœ“                               â”‚
â”‚                                                 â”‚
â”‚  3. Agent: "èšåˆæ•°æ®"                            â”‚
â”‚     â†’ Tool: aggregate(filtered_data)            â”‚
â”‚     â†’ Result: [5,000 tokens of aggregated]      â”‚
â”‚     â†’ è¿›å…¥ä¸Šä¸‹æ–‡: âœ“                               â”‚
â”‚                                                 â”‚
â”‚  é—®é¢˜: æ‰€æœ‰ä¸­é—´ç»“æœéƒ½æµç»æ¨¡å‹ä¸Šä¸‹æ–‡                  â”‚
â”‚  ç»“æœ: ç´¯è®¡ 80,000+ tokens                       â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä»£ç æ‰§è¡Œæ¨¡å¼çš„è§£å†³æ–¹æ¡ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è§£å†³æ–¹æ¡ˆ 1: æ¸è¿›å¼å·¥å…·å‘ç°                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  åˆå§‹åŠ è½½: 0 ä¸ªå·¥å…·å®šä¹‰                           â”‚
â”‚                                                 â”‚
â”‚  Agent: "æˆ‘éœ€è¦æ–‡ä»¶æ“ä½œ"                          â”‚
â”‚  â†’ search_tools(query="file", level="name")     â”‚
â”‚  â†’ è¿”å›: ["read_file", "write_file"]  (~50 tok) â”‚
â”‚                                                 â”‚
â”‚  Agent: "æˆ‘éœ€è¦ read_file çš„è¯¦æƒ…"                â”‚
â”‚  â†’ search_tools(query="read_file", level="full")â”‚
â”‚  â†’ è¿”å›: read_file çš„å®Œæ•´å®šä¹‰ (~200 tokens)      â”‚
â”‚                                                 â”‚
â”‚  ä¼˜åŠ¿: åªåŠ è½½éœ€è¦çš„å·¥å…·                            â”‚
â”‚  èŠ‚çœ: 95%+ tokens (10,000 â†’ 500 tokens)        â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è§£å†³æ–¹æ¡ˆ 2: åœ¨æ‰§è¡Œç¯å¢ƒä¸­å¤„ç†æ•°æ®                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  Agent ç¼–å†™ä¸€æ®µä»£ç :                              â”‚
â”‚                                                 â”‚
â”‚  execute_code('''                               â”‚
â”‚    from tools.filesystem import read_file       â”‚
â”‚    import json                                  â”‚
â”‚                                                 â”‚
â”‚    # è¯»å–æ•°æ® (åœ¨æ‰§è¡Œç¯å¢ƒä¸­)                       â”‚
â”‚    data = json.loads(read_file('data.json'))    â”‚
â”‚                                                 â”‚
â”‚    # è¿‡æ»¤æ•°æ® (åœ¨æ‰§è¡Œç¯å¢ƒä¸­)                       â”‚
â”‚    filtered = [                                 â”‚
â”‚      item for item in data                      â”‚
â”‚      if item['status'] == 'active'              â”‚
â”‚    ]                                            â”‚
â”‚                                                 â”‚
â”‚    # èšåˆæ•°æ® (åœ¨æ‰§è¡Œç¯å¢ƒä¸­)                       â”‚
â”‚    result = aggregate(filtered)                 â”‚
â”‚                                                 â”‚
â”‚    # åªè¿”å›æ‘˜è¦                                  â”‚
â”‚    print(f"Processed {len(data)} items")        â”‚
â”‚    print(f"Found {len(filtered)} active")       â”‚
â”‚    print(f"Result: {result}")                   â”‚
â”‚  ''')                                           â”‚
â”‚                                                 â”‚
â”‚  è¿”å›: åªæœ‰æ‰“å°çš„æ‘˜è¦ (~100 tokens)                â”‚
â”‚                                                 â”‚
â”‚  ä¼˜åŠ¿: æ•°æ®åœ¨æ‰§è¡Œç¯å¢ƒä¸­å¤„ç†,ä¸è¿›å…¥ä¸Šä¸‹æ–‡              â”‚
â”‚  èŠ‚çœ: 98%+ tokens (80,000 â†’ 2,000 tokens)      â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## äºŒã€æ¶æ„ç»„ä»¶

### 1. å·¥å…·å‘ç°å±‚ (Tool Discovery Layer)

```python
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tool Discovery API                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  list_tool_categories()                              â”‚
â”‚  â”œâ”€ åˆ—å‡ºæ‰€æœ‰å·¥å…·åˆ†ç±»                                   â”‚
â”‚  â””â”€ ä¸åŠ è½½å·¥å…·å®šä¹‰ (æœ€å° tokens)                       â”‚
â”‚                                                      â”‚
â”‚  search_tools(query, category, detail_level)         â”‚
â”‚  â”œâ”€ query: æœç´¢å…³é”®è¯                                 â”‚
â”‚  â”œâ”€ category: å¯é€‰çš„åˆ†ç±»è¿‡æ»¤                           â”‚
â”‚  â””â”€ detail_level:                                    â”‚
â”‚      â”œâ”€ "name": åªè¿”å›å·¥å…·åç§°                         â”‚
â”‚      â”œâ”€ "summary": åç§° + æè¿°                        â”‚
â”‚      â””â”€ "full": å®Œæ•´å®šä¹‰ + schema                     â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tool Structure (Virtual Filesystem)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  tools/                                              â”‚
â”‚  â”œâ”€â”€ filesystem/                                     â”‚
â”‚  â”‚   â”œâ”€â”€ read_file.py                               â”‚
â”‚  â”‚   â”œâ”€â”€ write_file.py                              â”‚
â”‚  â”‚   â””â”€â”€ list_directory.py                          â”‚
â”‚  â”œâ”€â”€ data_processing/                                â”‚
â”‚  â”‚   â”œâ”€â”€ filter_json.py                             â”‚
â”‚  â”‚   â””â”€â”€ aggregate_data.py                          â”‚
â”‚  â””â”€â”€ skills/                                         â”‚
â”‚      â”œâ”€â”€ list_skills.py                             â”‚
â”‚      â”œâ”€â”€ save_skill.py                              â”‚
â”‚      â””â”€â”€ load_skill.py                              â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. ä»£ç æ‰§è¡Œå±‚ (Code Execution Layer)

```python
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Code Execution Engine                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  execute_code(code, return_value, persist_state)     â”‚
â”‚                                                      â”‚
â”‚  è¾“å…¥: Python ä»£ç å­—ç¬¦ä¸²                               â”‚
â”‚  â”‚                                                   â”‚
â”‚  â”œâ”€â–º [è§£æä»£ç ]                                       â”‚
â”‚  â”‚                                                   â”‚
â”‚  â”œâ”€â–º [å‡†å¤‡æ‰§è¡Œç¯å¢ƒ]                                   â”‚
â”‚  â”‚    â”œâ”€ åŠ è½½ ToolsAPI                               â”‚
â”‚  â”‚    â”œâ”€ æ¢å¤æŒä¹…åŒ–çŠ¶æ€                                â”‚
â”‚  â”‚    â””â”€ è®¾ç½®å®‰å…¨é™åˆ¶                                  â”‚
â”‚  â”‚                                                   â”‚
â”‚  â”œâ”€â–º [æ‰§è¡Œä»£ç ]                                       â”‚
â”‚  â”‚    â”œâ”€ æ•è· stdout                                 â”‚
â”‚  â”‚    â”œâ”€ æ•è·å¼‚å¸¸                                     â”‚
â”‚  â”‚    â””â”€ è®°å½•æ‰§è¡Œæ—¥å¿—                                  â”‚
â”‚  â”‚                                                   â”‚
â”‚  â”œâ”€â–º [å¤„ç†ç»“æœ]                                       â”‚
â”‚  â”‚    â”œâ”€ æå– stdout è¾“å‡º                            â”‚
â”‚  â”‚    â”œâ”€ è·å–è¿”å›å€¼(å¯é€‰)                             â”‚
â”‚  â”‚    â””â”€ æŒä¹…åŒ–çŠ¶æ€(å¯é€‰)                             â”‚
â”‚  â”‚                                                   â”‚
â”‚  â””â”€â–º è¾“å‡º: æ‰§è¡Œç»“æœæ‘˜è¦                               â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Execution Environment                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  Global Namespace:                                   â”‚
â”‚  â”œâ”€ __builtins__: Python å†…ç½®å‡½æ•°                    â”‚
â”‚  â”œâ”€ json, os, Path: å¸¸ç”¨åº“                           â”‚
â”‚  â”œâ”€ tools: ToolsAPI å®ä¾‹                             â”‚
â”‚  â””â”€ <persisted_variables>: æŒä¹…åŒ–çš„å˜é‡               â”‚
â”‚                                                      â”‚
â”‚  Captured Output:                                    â”‚
â”‚  â”œâ”€ stdout: æ‰€æœ‰ print() è¾“å‡º                         â”‚
â”‚  â”œâ”€ stderr: é”™è¯¯ä¿¡æ¯                                  â”‚
â”‚  â””â”€ return_value: æœ€åè¡¨è¾¾å¼çš„å€¼                       â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. å·¥å…· API å±‚ (Tools API Layer)

```python
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ToolsAPI (Code-Friendly Interface)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  Agent ä»£ç ä¸­å¯ä»¥è¿™æ ·ä½¿ç”¨:                              â”‚
â”‚                                                      â”‚
â”‚  from tools.filesystem import read_file              â”‚
â”‚  from tools.data_processing import filter_json       â”‚
â”‚  from tools.skills import load_skill                 â”‚
â”‚                                                      â”‚
â”‚  # å°±åƒæ™®é€š Python å‡½æ•°ä¸€æ ·ä½¿ç”¨                         â”‚
â”‚  content = read_file('/path/to/file.txt')            â”‚
â”‚  filtered = filter_json(data, lambda x: x['active']) â”‚
â”‚  skill_fn = load_skill('my_skill')                   â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Implementation Classes                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  class FilesystemTools:                              â”‚
â”‚      @staticmethod                                   â”‚
â”‚      def read_file(path, encoding='utf-8'):          â”‚
â”‚          with open(path, 'r', encoding=encoding):    â”‚
â”‚              return f.read()                         â”‚
â”‚                                                      â”‚
â”‚  class DataProcessingTools:                          â”‚
â”‚      @staticmethod                                   â”‚
â”‚      def filter_json(data, filter_fn):               â”‚
â”‚          return [item for item in data               â”‚
â”‚                  if filter_fn(item)]                 â”‚
â”‚                                                      â”‚
â”‚  class SkillsTools:                                  â”‚
â”‚      @staticmethod                                   â”‚
â”‚      def load_skill(name):                           â”‚
â”‚          # ä»ç£ç›˜åŠ è½½æŠ€èƒ½ä»£ç                            â”‚
â”‚          # æ‰§è¡Œå¹¶è¿”å›å‡½æ•°                              â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. æŠ€èƒ½ç®¡ç†å±‚ (Skills Management Layer)

```python
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Skills Persistence                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  ./agent_skills/                                     â”‚
â”‚  â”œâ”€â”€ export_filtered_json.py                         â”‚
â”‚  â”‚   """                                             â”‚
â”‚  â”‚   Export filtered JSON data                       â”‚
â”‚  â”‚   Skill: export_filtered_json                     â”‚
â”‚  â”‚   """                                             â”‚
â”‚  â”‚   def export_filtered_json(...):                  â”‚
â”‚  â”‚       ...                                         â”‚
â”‚  â”‚                                                   â”‚
â”‚  â”œâ”€â”€ process_sales_report.py                         â”‚
â”‚  â”‚   """                                             â”‚
â”‚  â”‚   Process sales data and generate summary         â”‚
â”‚  â”‚   Skill: process_sales_report                     â”‚
â”‚  â”‚   """                                             â”‚
â”‚  â”‚   def process_sales_report(...):                  â”‚
â”‚  â”‚       ...                                         â”‚
â”‚  â”‚                                                   â”‚
â”‚  â””â”€â”€ ...more skills                                  â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Skill Lifecycle                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  1. å¼€å‘ (Develop)                                   â”‚
â”‚     Agent åœ¨ execute_code ä¸­ç¼–å†™å’Œæµ‹è¯•ä»£ç               â”‚
â”‚                                                      â”‚
â”‚  2. ä¿å­˜ (Save)                                      â”‚
â”‚     save_skill(name, code, description)              â”‚
â”‚     â””â”€â–º å†™å…¥ ./agent_skills/{name}.py                â”‚
â”‚                                                      â”‚
â”‚  3. å¤ç”¨ (Reuse)                                     â”‚
â”‚     from tools.skills import load_skill              â”‚
â”‚     fn = load_skill(name)                            â”‚
â”‚     â””â”€â–º åŠ è½½å¹¶è¿”å›å‡½æ•°ä¾›ä½¿ç”¨                           â”‚
â”‚                                                      â”‚
â”‚  4. è¿›åŒ– (Evolve)                                    â”‚
â”‚     Agent å¯ä»¥æ”¹è¿›ç°æœ‰æŠ€èƒ½,ä¿å­˜æ–°ç‰ˆæœ¬                    â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä¸‰ã€æ•°æ®æµå¯¹æ¯”

### ä¼ ç»Ÿæ¨¡å¼çš„æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Model Context (Token ç´¯ç§¯)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  Round 1:                                          â”‚
â”‚  â”œâ”€ User: "è¯»å– data.json"                          â”‚
â”‚  â”œâ”€ Tool Call: read_file("data.json")              â”‚
â”‚  â””â”€ Result: <50,000 tokens of data>                â”‚
â”‚      â†“ ç´¯ç§¯: 50,000 tokens                          â”‚
â”‚                                                    â”‚
â”‚  Round 2:                                          â”‚
â”‚  â”œâ”€ User: "è¿‡æ»¤ active ç”¨æˆ·"                         â”‚
â”‚  â”œâ”€ Tool Call: filter(data, status="active")       â”‚
â”‚  â””â”€ Result: <25,000 tokens of filtered>            â”‚
â”‚      â†“ ç´¯ç§¯: 75,000 tokens                          â”‚
â”‚                                                    â”‚
â”‚  Round 3:                                          â”‚
â”‚  â”œâ”€ User: "èšåˆæ•°æ®"                                â”‚
â”‚  â”œâ”€ Tool Call: aggregate(filtered)                 â”‚
â”‚  â””â”€ Result: <5,000 tokens of result>               â”‚
â”‚      â†“ ç´¯ç§¯: 80,000 tokens                          â”‚
â”‚                                                    â”‚
â”‚  Round 4:                                          â”‚
â”‚  â”œâ”€ User: "å†™å…¥ report.json"                        â”‚
â”‚  â”œâ”€ Tool Call: write_file("report.json", result)   â”‚
â”‚  â””â”€ Result: "Success"                              â”‚
â”‚      â†“ æœ€ç»ˆ: 80,000+ tokens                         â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é—®é¢˜:
âœ— æ¯ä¸ªä¸­é—´ç»“æœéƒ½è¿›å…¥ä¸Šä¸‹æ–‡
âœ— Token ä½¿ç”¨çº¿æ€§å¢é•¿
âœ— ä¸Šä¸‹æ–‡çª—å£å¿«é€Ÿå¡«æ»¡
âœ— å¢åŠ å»¶è¿Ÿå’Œæˆæœ¬
```

### ä»£ç æ‰§è¡Œæ¨¡å¼çš„æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Model Context (æœ€å° Tokens)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  Single Round:                                     â”‚
â”‚  â”œâ”€ User: "å¤„ç†æ•°æ®å¹¶ç”ŸæˆæŠ¥å‘Š"                        â”‚
â”‚  â”œâ”€ Agent: ç¼–å†™ä»£ç                                  â”‚
â”‚  â””â”€ Tool Call: execute_code('''                    â”‚
â”‚       from tools.filesystem import read_file       â”‚
â”‚       data = read_file('data.json')                â”‚
â”‚       filtered = [item for item in data            â”‚
â”‚                   if item['status'] == 'active']   â”‚
â”‚       result = aggregate(filtered)                 â”‚
â”‚       write_file('report.json', result)            â”‚
â”‚       print(f"Processed {len(data)} items")        â”‚
â”‚     ''')                                           â”‚
â”‚  â””â”€ Result: "Processed 10000 items" (~100 tokens)  â”‚
â”‚      â†“ ç´¯ç§¯: ~2,000 tokens                          â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Execution Environment (æ•°æ®åœ¨è¿™é‡Œå¤„ç†)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  Step 1: data = read_file(...)                     â”‚
â”‚          â””â”€â–º 50,000 tokens of data                 â”‚
â”‚               (ä¸è¿›å…¥æ¨¡å‹ä¸Šä¸‹æ–‡)                       â”‚
â”‚                                                    â”‚
â”‚  Step 2: filtered = [...]                          â”‚
â”‚          â””â”€â–º 25,000 tokens filtered                â”‚
â”‚               (ä¸è¿›å…¥æ¨¡å‹ä¸Šä¸‹æ–‡)                       â”‚
â”‚                                                    â”‚
â”‚  Step 3: result = aggregate(...)                   â”‚
â”‚          â””â”€â–º 5,000 tokens result                   â”‚
â”‚               (ä¸è¿›å…¥æ¨¡å‹ä¸Šä¸‹æ–‡)                       â”‚
â”‚                                                    â”‚
â”‚  Step 4: write_file(...)                           â”‚
â”‚          â””â”€â–º å†™å…¥ç£ç›˜                                â”‚
â”‚                                                    â”‚
â”‚  Step 5: print("Processed 10000 items")            â”‚
â”‚          â””â”€â–º åªæœ‰è¿™ä¸ªè¿›å…¥æ¨¡å‹ä¸Šä¸‹æ–‡!                   â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¼˜åŠ¿:
âœ“ ä¸­é—´ç»“æœç•™åœ¨æ‰§è¡Œç¯å¢ƒ
âœ“ Token ä½¿ç”¨æ’å®š(ä¸éšæ•°æ®å¢é•¿)
âœ“ ä¸Šä¸‹æ–‡çª—å£ä¿æŒæ¸…çˆ½
âœ“ é™ä½å»¶è¿Ÿå’Œæˆæœ¬
```

## å››ã€æ€§èƒ½æŒ‡æ ‡

### Token ä½¿ç”¨å¯¹æ¯”

| æ“ä½œ | ä¼ ç»Ÿæ¨¡å¼ | ä»£ç æ‰§è¡Œæ¨¡å¼ | èŠ‚çœ |
|------|---------|-------------|------|
| å·¥å…·å‘ç° | 10,000 tokens | 500 tokens | 95.0% |
| è¯»å–+è¿‡æ»¤ 10K è¡Œ | 75,000 tokens | 2,000 tokens | 97.3% |
| è¯»å–+è¿‡æ»¤+èšåˆ | 80,000 tokens | 2,000 tokens | 97.5% |
| å¾ªç¯å¤„ç† 100 æ–‡ä»¶ | 500,000 tokens | 3,000 tokens | 99.4% |
| å¤æ‚æ•°æ®æµæ°´çº¿ | 200,000 tokens | 5,000 tokens | 97.5% |

### æ—¶é—´å¯¹æ¯”

| æ“ä½œ | ä¼ ç»Ÿæ¨¡å¼ | ä»£ç æ‰§è¡Œæ¨¡å¼ | æ”¹å–„ |
|------|---------|-------------|------|
| ç®€å•æŸ¥è¯¢ | ~10 ç§’ (1 call) | ~10 ç§’ (1 call) | 0% |
| 3 æ­¥å¤„ç† | ~30 ç§’ (3 calls) | ~10 ç§’ (1 call) | 66.7% |
| 10 æ­¥æµæ°´çº¿ | ~100 ç§’ (10 calls) | ~15 ç§’ (1 call) | 85% |
| ç­‰å¾…+è½®è¯¢ | ~120 ç§’ (12 calls) | ~30 ç§’ (1 call + loops) | 75% |

### æˆæœ¬å¯¹æ¯” (å‡è®¾ $3/M input tokens)

| åœºæ™¯ | ä¼ ç»Ÿæ¨¡å¼ | ä»£ç æ‰§è¡Œæ¨¡å¼ | èŠ‚çœ |
|------|---------|-------------|------|
| å•æ¬¡ç®€å•ä»»åŠ¡ | $0.03 | $0.006 | 80% |
| æ•°æ®å¤„ç†æµæ°´çº¿ | $0.24 | $0.006 | 97.5% |
| 100 æ¬¡æ•°æ®å¤„ç† | $24.00 | $0.60 | 97.5% |
| æœˆåº¦è¿è¥ (10K tasks) | $2,400 | $60 | 97.5% |

## äº”ã€å®‰å…¨æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Security Layers                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  1. Code Validation                                â”‚
â”‚     â”œâ”€ Syntax checking                             â”‚
â”‚     â”œâ”€ Import restrictions                         â”‚
â”‚     â””â”€ Dangerous pattern detection                 â”‚
â”‚                                                    â”‚
â”‚  2. Resource Limits                                â”‚
â”‚     â”œâ”€ CPU time limit                              â”‚
â”‚     â”œâ”€ Memory limit                                â”‚
â”‚     â”œâ”€ Execution timeout                           â”‚
â”‚     â””â”€ File size limits                            â”‚
â”‚                                                    â”‚
â”‚  3. Filesystem Isolation                           â”‚
â”‚     â”œâ”€ Chroot jail                                 â”‚
â”‚     â”œâ”€ Read-only system paths                      â”‚
â”‚     â””â”€ Workspace directory only                    â”‚
â”‚                                                    â”‚
â”‚  4. Network Isolation                              â”‚
â”‚     â”œâ”€ No network access (default)                 â”‚
â”‚     â”œâ”€ Whitelist for approved APIs                 â”‚
â”‚     â””â”€ Rate limiting                               â”‚
â”‚                                                    â”‚
â”‚  5. Execution Monitoring                           â”‚
â”‚     â”œâ”€ Execution logs                              â”‚
â”‚     â”œâ”€ Audit trail                                 â”‚
â”‚     â””â”€ Anomaly detection                           â”‚
â”‚                                                    â”‚
â”‚  6. Privacy Protection                             â”‚
â”‚     â”œâ”€ PII detection and tokenization              â”‚
â”‚     â”œâ”€ Data flow controls                          â”‚
â”‚     â””â”€ Compliance enforcement                      â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å…­ã€æ‰©å±•æ€§è®¾è®¡

### æ·»åŠ æ–°å·¥å…·ç±»åˆ«

```python
# 1. åœ¨ generate_tool_api_structure() ä¸­å®šä¹‰
tools = {
    "new_category": {
        "description": "New category description",
        "tools": {
            "new_tool": {
                "description": "...",
                "parameters": {...},
                "returns": "..."
            }
        }
    }
}

# 2. åœ¨ ToolsAPI ä¸­å®ç°
class ToolsAPI:
    class NewCategoryTools:
        @staticmethod
        def new_tool(param1, param2):
            # Implementation
            pass

    def __init__(self):
        self.new_category = self.NewCategoryTools()

# 3. è‡ªåŠ¨å¯é€šè¿‡ search_tools() å‘ç°!
```

### é›†æˆå¤–éƒ¨æœåŠ¡

```python
# ç¤ºä¾‹: é›†æˆ Database å·¥å…·
class DatabaseTools:
    def __init__(self):
        self.connection = create_connection()

    def query(self, sql: str) -> List[Dict]:
        """Execute SQL query"""
        return self.connection.execute(sql)

    def insert(self, table: str, data: Dict) -> bool:
        """Insert data into table"""
        return self.connection.insert(table, data)
```

## ä¸ƒã€æ€»ç»“

è¿™ä¸ªæ¶æ„å®ç°äº† Anthropic æ–‡ç« ä¸­æå‡ºçš„æ‰€æœ‰å…³é”®æ€æƒ³:

âœ… **æ¸è¿›å¼å·¥å…·å‘ç°**: æŒ‰éœ€åŠ è½½å·¥å…·å®šä¹‰,èŠ‚çœ 95%+ tokens
âœ… **ä¸Šä¸‹æ–‡é«˜æ•ˆå¤„ç†**: æ•°æ®åœ¨æ‰§è¡Œç¯å¢ƒå¤„ç†,èŠ‚çœ 97%+ tokens
âœ… **å¼ºå¤§æ§åˆ¶æµ**: åŸç”Ÿ Python å¾ªç¯ã€æ¡ä»¶ã€å¼‚å¸¸å¤„ç†
âœ… **éšç§ä¿æŠ¤**: æ•æ„Ÿæ•°æ®ä¸è¿›å…¥æ¨¡å‹ä¸Šä¸‹æ–‡
âœ… **æŠ€èƒ½æŒä¹…åŒ–**: Agent å¯ä»¥æ„å»ºå¯å¤ç”¨çš„å‡½æ•°åº“
âœ… **å®‰å…¨æ²™ç®±**: å¤šå±‚å®‰å…¨é˜²æŠ¤ç¡®ä¿å®‰å…¨æ‰§è¡Œ

è¿™å°±æ˜¯æœªæ¥ Agent ä¸å·¥å…·äº¤äº’çš„æ–¹å¼! ğŸš€
